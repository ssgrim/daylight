import { createRequire } from "module"; const require = createRequire(import.meta.url);
function i(r){if(!r||typeof r!="object")throw new Error("Request body must be a valid JSON object");let{tripId:t}=r;if(!t||typeof t!="string")throw new Error("tripId is required and must be a string");if(t.length<1||t.length>100)throw new Error("tripId must be between 1 and 100 characters");let e=t.replace(/[^a-zA-Z0-9\-_]/g,"");if(e.length===0)throw new Error("tripId contains invalid characters");return{tripId:e}}var s=async r=>{let t=r.requestContext.requestId;try{if(r.requestContext.http.method==="POST"){if(!r.body)return{statusCode:400,body:JSON.stringify({error:"Request body is required"})};let e;try{e=JSON.parse(r.body)}catch{return{statusCode:400,body:JSON.stringify({error:"Invalid JSON in request body"})}}let{tripId:o}=i(e);return{statusCode:200,body:JSON.stringify({ok:!0,tripId:o,requestId:t})}}return{statusCode:405,body:JSON.stringify({error:"Method Not Allowed"})}}catch(e){return{statusCode:400,body:JSON.stringify({error:e.message||"Invalid request",requestId:t})}}};export{s as handler};
